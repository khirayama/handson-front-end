machine:
  timezone: Asia/Tokyo

deployment:
  master:
    branch: master
    commands:
      - git config --global user.name "circleci"
      - git config --global user.email "circleci@feedforce.jp"
      - git clone git@github.com:khirayama/handson-front-end.git
      - cd handson-front-end
      - git branch -D gh-pages
      - git checkout -b gh-pages
      - npm install
      - npm run build
      - rm -rf beginner intermediate senir extra handson-fornt-end
      - mv prod/* ./
      - rm _layput.html README.md .gitignore gulpfile.js package.json
      - rm -rf src
      - git add .
      - git commit -m "publish gh-pages"
      - git push origin gh-pages -f
